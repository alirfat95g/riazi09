<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ ğŸ§ </title>
    <link
      href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      /*
        =========================================================
        Ø¨Ø®Ø´ CSS: Ø§Ø³ØªØ§ÛŒÙ„â€ŒÙ‡Ø§ Ùˆ ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ÛŒÛŒ
        =========================================================
        */
      :root {
        --primary-color: #4caf50; /* Ø³Ø¨Ø² Ø´Ø§Ø¯ */
        --secondary-color: #ffc107; /* Ø²Ø±Ø¯ */
        --background-color: #e8f5e9; /* Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ Ø±ÙˆØ´Ù† */
        --correct-color: #4caf50;
        --wrong-color: #f44336;
        --text-color: #333;
        --font-family: "Vazirmatn", sans-serif;
        --selected-color: #ff9800; /* Ù†Ø§Ø±Ù†Ø¬ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ */
      }

      body {
        font-family: var(--font-family);
        background-color: var(--background-color);
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        color: var(--text-color);
        direction: rtl;
        overflow-x: hidden;
      }

      #game-container {
        background-color: #fff;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        width: 95%;
        max-width: 800px;
        padding: 20px;
        box-sizing: border-box;
        transition: all 0.3s ease;
      }

      header {
        text-align: center;
        margin-bottom: 20px;
      }

      header h1 {
        color: var(--primary-color);
        font-size: 1.8rem;
        margin-bottom: 5px;
      }

      #progress-bar {
        height: 10px;
        background-color: #ddd;
        border-radius: 5px;
        overflow: hidden;
        margin-bottom: 20px;
      }

      #progress {
        height: 100%;
        width: 0%;
        background-color: var(--secondary-color);
        transition: width 0.5s ease;
      }

      #score-display {
        font-size: 1.2rem;
        font-weight: bold;
        color: var(--text-color);
        margin-top: 10px;
      }

      #question-area {
        min-height: 150px;
        border: 2px dashed #ccc;
        border-radius: 10px;
        padding: 15px;
        text-align: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        margin-bottom: 20px;
      }

      #question-text {
        font-size: 1.4rem;
        font-weight: bold;
        margin-bottom: 15px;
      }

      /* Ù†Ø§Ø­ÛŒÙ‡ Ø¹Ù†Ø§ØµØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´ÙˆÙ†Ø¯Ù‡ */
      #option-elements {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        min-height: 80px;
        padding: 10px 0;
      }

      .selectable-item {
        background-color: #2196f3; /* Ø¢Ø¨ÛŒ */
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s, background-color 0.2s;
        user-select: none;
      }

      .selectable-item:hover {
        transform: translateY(-2px);
      }

      .selectable-item.selected {
        background-color: var(--selected-color);
        transform: scale(1.05);
        border: 3px solid white;
      }

      /* Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ */
      #feedback-message {
        font-size: 1.5rem;
        font-weight: bold;
        margin-top: 10px;
        height: 30px;
        opacity: 0;
        transition: opacity 0.5s ease;
      }

      .correct {
        color: var(--correct-color);
        animation: bounceIn 0.5s;
      }

      .wrong {
        color: var(--wrong-color);
        animation: shake 0.5s;
      }

      /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù†â€ŒÙ‡Ø§ */
      @keyframes bounceIn {
        0% {
          opacity: 0;
          transform: scale(0.3);
        }
        70% {
          transform: scale(1.1);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        20%,
        60% {
          transform: translateX(-10px);
        }
        40%,
        80% {
          transform: translateX(10px);
        }
      }

      /* Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† (Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³Ø§Ø¯Ù‡ CSS) */
      #venn-diagram-container {
        position: relative;
        width: 90%;
        max-width: 400px;
        height: 250px;
        margin: 20px auto;
        /* Ù…Ø®ÙÛŒ Ø³Ø§Ø²ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ */
        display: none;
      }

      #universal {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        background-color: rgba(0, 0, 0, 0.05);
        border: 2px solid #333;
        border-radius: 10px;
        z-index: 5;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        font-weight: bold;
        color: #555;
      }

      .set {
        position: absolute;
        border-radius: 50%;
        opacity: 0.8;
        border: 3px solid;
        cursor: pointer;
        width: 180px;
        height: 180px;
        transition: border-color 0.3s, box-shadow 0.3s;
        z-index: 10;
      }

      #setA {
        background-color: rgba(63, 81, 181, 0.5); /* Ø¢Ø¨ÛŒ ØªÛŒØ±Ù‡ */
        border-color: #3f51b5;
        left: 50px;
        top: 35px;
      }
      #setB {
        background-color: rgba(255, 87, 34, 0.5); /* Ù†Ø§Ø±Ù†Ø¬ÛŒ */
        border-color: #ff5722;
        right: 50px;
        top: 35px;
      }

      /* Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø§Ø­ÛŒÙ‡ ÙˆÙ† */
      .set.selected,
      #universal.selected {
        border: 5px solid var(--selected-color) !important;
        box-shadow: 0 0 15px var(--selected-color);
        opacity: 1;
      }

      /* ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„ */
      @media (max-width: 600px) {
        #game-container {
          padding: 10px;
          margin: 5px;
        }
        header h1 {
          font-size: 1.5rem;
        }
        #question-text {
          font-size: 1.2rem;
        }
        .selectable-item {
          padding: 10px 15px;
          font-size: 1rem;
        }
        #venn-diagram-container {
          height: 200px;
        }
        .set {
          width: 120px;
          height: 120px;
          top: 50px;
        }
        #setA {
          left: 30px;
        }
        #setB {
          right: 30px;
        }
      }
    </style>
  </head>
  <body>
    <div id="game-container">
      <header>
        <h1>Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ ğŸ§ </h1>
        <div id="progress-bar"><div id="progress"></div></div>
        <div id="score-display">Ø§Ù…ØªÛŒØ§Ø²: 0</div>
      </header>

      <div id="question-area">
        <div id="question-text">Ø³ÙˆØ§Ù„...</div>

        <div id="venn-diagram-container">
          <div
            id="universal"
            class="drop-zone venn-zone"
            data-set-name="U"
          ></div>
          <div id="setA" class="set venn-zone" data-set-name="A"></div>
          <div id="setB" class="set venn-zone" data-set-name="B"></div>
        </div>
      </div>

      <div id="option-elements"></div>

      <div id="feedback-message"></div>

      <button
        id="action-button"
        onclick="handleActionButton()"
        style="
          background-color: var(--secondary-color);
          color: #333;
          padding: 12px 25px;
          border: none;
          border-radius: 8px;
          font-size: 1.2rem;
          cursor: pointer;
          margin-top: 15px;
          font-weight: bold;
        "
      >
        Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®
      </button>

      <div id="final-score" style="display: none; text-align: center">
        <h2>Ù¾Ø§ÛŒØ§Ù† Ø¨Ø§Ø²ÛŒ!</h2>
        <p id="final-message" style="font-size: 1.5rem"></p>
        <button
          onclick="window.location.reload()"
          style="
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            margin-top: 15px;
          "
        >
          Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡
        </button>
      </div>
    </div>

    <script>
      /*
    =========================================================
    Ø¨Ø®Ø´ JavaScript: Ù…Ù†Ø·Ù‚ Ø¨Ø§Ø²ÛŒØŒ Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ùˆ ØªØ¹Ø§Ù…Ù„
    =========================================================
    */

      const questions = [
        // Ù†ÙˆØ¹ 1: ØªØ¹Ø±ÛŒÙ Ù…Ø¬Ù…ÙˆØ¹Ù‡ (Ø§Ù†ØªØ®Ø§Ø¨ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡) - Ú©Ù„ÛŒÚ© Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨
        {
          type: 1,
          text: "Ø¹Ù†Ø§ØµØ± Ù…Ø¬Ù…ÙˆØ¹Ù‡ A = {1, 2, 3, 4} Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          elements: ["1", "2", "3", "4", "5", "6"],
          correctAnswer: ["1", "2", "3", "4"],
        },
        // Ù†ÙˆØ¹ 2: Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡/Ø§Ø¬ØªÙ…Ø§Ø¹/Ø§Ø´ØªØ±Ø§Ú©/ØªÙØ§Ø¶Ù„ (Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø²ÛŒÙ†Ù‡)
        {
          type: 2,
          text: "Ø§Ú¯Ø± A={Ø§, Ø¨} Ùˆ B={Ø§, Ø¨, Ù¾} Ø¨Ø§Ø´Ø¯ØŒ A âˆ© B Ú©Ø¯Ø§Ù… Ø§Ø³ØªØŸ",
          options: ["{Ø§, Ø¨}", "{Ø§, Ø¨, Ù¾}", "{Ù¾}"],
          correctAnswer: "{Ø§, Ø¨}",
        },
        // Ù†ÙˆØ¹ 3: Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† (Ú©Ù„ÛŒÚ© Ø¨Ø± Ù†Ø§Ø­ÛŒÙ‡) - Ø§Ø´ØªØ±Ø§Ú©
        {
          type: 3,
          text: "Ù†Ø§Ø­ÛŒÙ‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ **Ø§Ø´ØªØ±Ø§Ú© (A âˆ© B)** Ø±Ø§ Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          setNames: ["A", "B"],
          correctAnswer: "A-and-B",
        },
        // Ù†ÙˆØ¹ 3: Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† (Ú©Ù„ÛŒÚ© Ø¨Ø± Ù†Ø§Ø­ÛŒÙ‡) - ØªÙØ§Ø¶Ù„
        {
          type: 3,
          text: "Ù†Ø§Ø­ÛŒÙ‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ **ØªÙØ§Ø¶Ù„ (A - B)** Ø±Ø§ Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          setNames: ["A", "B"],
          correctAnswer: "A-only",
        },
        // Ù†ÙˆØ¹ 3: Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† (Ú©Ù„ÛŒÚ© Ø¨Ø± Ù†Ø§Ø­ÛŒÙ‡) - Ø§Ø¬ØªÙ…Ø§Ø¹
        {
          type: 3,
          text: "Ù†Ø§Ø­ÛŒÙ‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ **Ø§Ø¬ØªÙ…Ø§Ø¹ (A âˆª B)** Ø±Ø§ Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          setNames: ["A", "B"],
          correctAnswer: "AUB",
        },
        // Ù†ÙˆØ¹ 2: Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø²ÛŒÙ†Ù‡ - Ù…ØªÙ…Ù…
        {
          type: 2,
          text: "Ø§Ú¯Ø± U={1, 2, 3, 4} Ùˆ A={1, 2} Ø¨Ø§Ø´Ø¯ØŒ A' (Ù…ØªÙ…Ù… A) Ú©Ø¯Ø§Ù… Ø§Ø³ØªØŸ",
          options: ["{1, 2}", "{3, 4}", "{1, 2, 3, 4}"],
          correctAnswer: "{3, 4}",
        },
        // Ù†ÙˆØ¹ 1: Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†Ø§ØµØ± ØªÙ‡ÛŒ
        {
          type: 1,
          text: "Ú©Ø¯Ø§Ù… Ø¹Ù†Ø§ØµØ± Ø¯Ø± Ù…Ø¬Ù…ÙˆØ¹Ù‡ ØªÙ‡ÛŒ { } Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ù†Ø¯ØŸ (Ø±ÙˆÛŒ Ù‡ÛŒÚ†â€ŒÚ©Ø¯Ø§Ù… Ú©Ù„ÛŒÚ© Ù†Ú©Ù†ÛŒØ¯)",
          elements: ["10", "20", "30"],
          correctAnswer: [],
        },
        // Ù†ÙˆØ¹ 2: ØªØ¹Ø¯Ø§Ø¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§
        {
          type: 2,
          text: "ØªØ¹Ø¯Ø§Ø¯ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ù…ÙˆØ¹Ù‡ {Ù‚Ù„Ù…, Ú©ØªØ§Ø¨, Ø¯ÙØªØ±} Ú†Ù†Ø¯ØªØ§Ø³ØªØŸ",
          options: ["3", "6", "8", "9"],
          correctAnswer: "8",
        },
        // Ù†ÙˆØ¹ 3: Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† (Ù…ØªÙ…Ù…)
        {
          type: 3,
          text: "Ù†Ø§Ø­ÛŒÙ‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ **Ù…ØªÙ…Ù… A (A')** Ø±Ø§ Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          setNames: ["A"],
          correctAnswer: "U-AUB",
        },
        // Ù†ÙˆØ¹ 1: Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†Ø§ØµØ± Ø§Ø² ÛŒÚ© ØªØ¹Ø±ÛŒÙ Ù…ØªÙ†ÛŒ
        {
          type: 1,
          text: "Ø§Ø¹Ø¯Ø§Ø¯ Ø²ÙˆØ¬ Ú©ÙˆÚ†Ú©â€ŒØªØ± Ø§Ø² Û±Û° Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          elements: ["2", "3", "4", "5", "6", "8", "9"],
          correctAnswer: ["2", "4", "6", "8"],
        },
        // Ù†ÙˆØ¹ 2: Ø®Ø§ØµÛŒØª Ø¬Ø§Ø¨Ø¬Ø§ÛŒÛŒ
        {
          type: 2,
          text: "Ø¢ÛŒØ§ A âˆª B Ø¨Ø±Ø§Ø¨Ø± B âˆª A Ø§Ø³ØªØŸ",
          options: ["Ø¨Ù„Ù‡ (Ø¯Ø±Ø³Øª)", "Ø®ÛŒØ± (ØºÙ„Ø·)"],
          correctAnswer: "Ø¨Ù„Ù‡ (Ø¯Ø±Ø³Øª)",
        },
        // Ù†ÙˆØ¹ 3: ØªÙØ§Ø¶Ù„ Ù…ØªÙ‚Ø§Ø±Ù† (A Î” B)
        {
          type: 3,
          text: "Ù†Ø§Ø­ÛŒÙ‡ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ **ØªÙØ§Ø¶Ù„ Ù…ØªÙ‚Ø§Ø±Ù† (A Î” B)** Ø±Ø§ Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          setNames: ["A", "B"],
          correctAnswer: "A-only-or-B-only",
        },
        // Ù†ÙˆØ¹ 2: Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡
        {
          type: 2,
          text: "Ø¢ÛŒØ§ {Ø§Ù„Ù} Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ {Ø§Ù„ÙØŒ Ø¨} Ø§Ø³ØªØŸ",
          options: ["Ø¨Ù„Ù‡", "Ø®ÛŒØ±"],
          correctAnswer: "Ø¨Ù„Ù‡",
        },
        // Ù†ÙˆØ¹ 1: Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†Ø§ØµØ± Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù…Ø±Ø¬Ø¹
        {
          type: 1,
          text: "ØªÙ…Ø§Ù… Ø¹Ù†Ø§ØµØ± Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ù…Ø±Ø¬Ø¹ U = {Ø³ØŒ Ø¹ØŒ Ø¯} Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.",
          elements: ["Ø³", "Ø¹", "Ø¯", "Ùˆ", "Ù‚"],
          correctAnswer: ["Ø³", "Ø¹", "Ø¯"],
        },
        // Ù†ÙˆØ¹ 2: Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ ØªÙ‡ÛŒ
        {
          type: 2,
          text: "Ù…Ø¬Ù…ÙˆØ¹Ù‡ ØªÙ‡ÛŒ { } Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ú†Ù†Ø¯ Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø¯ÛŒÚ¯Ø± Ø§Ø³ØªØŸ",
          options: ["Ù‡ÛŒÚ†â€ŒÚ©Ø¯Ø§Ù…", "ÙÙ‚Ø· Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ ØºÛŒØ±ØªÙ‡ÛŒ", "Ù‡Ù…Ù‡ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§"],
          correctAnswer: "Ù‡Ù…Ù‡ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§",
        },
      ];

      let currentQuestion = 0;
      let score = 0;
      const totalQuestions = questions.length;
      // Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ø¯Ù‚ÛŒÙ‚: Ø§Ú¯Ø± 15 Ø³ÙˆØ§Ù„ Ø¨Ø§Ø´Ø¯ØŒ Ù‡Ø± Ø³ÙˆØ§Ù„ 6.66... Ø§Ù…ØªÛŒØ§Ø² Ø¯Ø§Ø±Ø¯ØŒ Ù¾Ø³ Ø§Ø² Ø¶Ø±Ø¨ Ø¯Ø± 15 Ø¨Ù‡ 100 Ù…ÛŒâ€ŒØ±Ø³Ø¯.
      const scorePerQuestion = 100 / totalQuestions;

      // Ø¹Ù†Ø§ØµØ± DOM
      const qText = document.getElementById("question-text");
      const optionElementsArea = document.getElementById("option-elements");
      const progressDiv = document.getElementById("progress");
      const scoreDisplay = document.getElementById("score-display");
      const feedbackMessage = document.getElementById("feedback-message");
      const actionButton = document.getElementById("action-button");
      const vennContainer = document.getElementById("venn-diagram-container");
      const finalScoreDiv = document.getElementById("final-score");
      const setA = document.getElementById("setA");
      const setB = document.getElementById("setB");
      const universal = document.getElementById("universal");

      // ÙˆØ¶Ø¹ÛŒØª Ø¨Ø§Ø²ÛŒ
      let isAnswerChecked = false;
      let selectedType1 = []; // Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø¹Ù†Ø§ØµØ± Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø¯Ø± Ù†ÙˆØ¹ 1
      let selectedType2 = null; // Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø± Ù†ÙˆØ¹ 2
      let selectedVennSet = null; // Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ù†Ø§Ø­ÛŒÙ‡ ÙˆÙ† Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø¯Ø± Ù†ÙˆØ¹ 3

      // ==========================================================
      // ØªÙˆØ§Ø¨Ø¹ Ú©Ù…Ú©ÛŒ
      // ==========================================================

      function updateProgress() {
        const percentage = (currentQuestion / totalQuestions) * 100;
        progressDiv.style.width = `${percentage}%`;
        scoreDisplay.textContent = `Ø§Ù…ØªÛŒØ§Ø²: ${Math.round(score)}`;
      }

      function showFeedback(isCorrect) {
        let message;
        if (isCorrect) {
          const messages = [
            "Ø¢ÙØ±ÛŒÙ†! ğŸ‰",
            "Ø¯Ø±Ø³Øª Ú¯ÙØªÛŒ! ğŸ¥³",
            "Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯! â­",
            "Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ! ğŸ¯",
          ];
          message = messages[Math.floor(Math.random() * messages.length)];
          feedbackMessage.className = "correct";
        } else {
          message = "Ø§Ø´ØªØ¨Ø§Ù‡ Ø¨ÙˆØ¯. Ø¯ÙˆØ¨Ø§Ø±Ù‡ ØªÙ„Ø§Ø´ Ú©Ù†. ğŸ˜•";
          feedbackMessage.className = "wrong";
        }
        feedbackMessage.textContent = message;
        feedbackMessage.style.opacity = 1;

        // Ø¨Ø§Ø²Ø®ÙˆØ±Ø¯ Ø¨ØµØ±ÛŒ Ø±ÙˆÛŒ Ø¯Ú©Ù…Ù‡ Ø¯Ø± ØµÙˆØ±Øª ØºÙ„Ø· Ø¨ÙˆØ¯Ù†
        if (!isCorrect) {
          actionButton.style.backgroundColor = "var(--wrong-color)";
          setTimeout(() => {
            actionButton.style.backgroundColor = "var(--secondary-color)";
          }, 500);
        }

        setTimeout(() => {
          feedbackMessage.style.opacity = 0;
        }, 1500);
      }

      function resetSelections() {
        selectedType1 = [];
        selectedType2 = null;
        selectedVennSet = null;
        document
          .querySelectorAll(".selectable-item, .venn-zone")
          .forEach((el) => {
            el.classList.remove("selected");
          });
      }

      // ==========================================================
      // Ù…Ø¯ÛŒØ±ÛŒØª ØªØ¹Ø§Ù…Ù„ (Ú©Ù„ÛŒÚ©/Ù„Ù…Ø³)
      // ==========================================================

      // Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ 1 (Ø§Ù†ØªØ®Ø§Ø¨ Ø¹Ù†Ø§ØµØ±)
      function handleType1Click(element, value) {
        if (isAnswerChecked) return;

        const index = selectedType1.indexOf(value);
        if (index > -1) {
          selectedType1.splice(index, 1);
          element.classList.remove("selected");
        } else {
          selectedType1.push(value);
          element.classList.add("selected");
        }
      }

      // Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ 2 (Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø²ÛŒÙ†Ù‡)
      function handleType2Click(element, selectedOption) {
        if (isAnswerChecked) return;

        // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§
        document
          .querySelectorAll("#option-elements .selectable-item")
          .forEach((el) => el.classList.remove("selected"));

        selectedType2 = selectedOption;
        element.classList.add("selected");
      }

      // Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ† Ù†ÙˆØ¹ 3 (Ú©Ù„ÛŒÚ© Ø¨Ø± Ù†Ø§Ø­ÛŒÙ‡ Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ†)
      function handleVennClick(e) {
        if (isAnswerChecked) return;

        document
          .querySelectorAll(".venn-zone")
          .forEach((el) => el.classList.remove("selected"));

        const clickedSet = e.target;
        clickedSet.classList.add("selected");
        selectedVennSet = clickedSet.dataset.setName;

        // Ø§Ú¯Ø± Ù†Ø§Ø­ÛŒÙ‡ Ø§Ø´ØªØ±Ø§Ú©/ØªÙØ§Ø¶Ù„ Ú©Ù„ÛŒÚ© Ø´ÙˆØ¯ (Ù…Ù†Ø·Ù‚ Ù¾ÛŒÚ†ÛŒØ¯Ù‡)
        if (clickedSet.id === "setA" || clickedSet.id === "setB") {
          // Ø¯Ø± Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† CSSØŒ Ú©Ù„ÛŒÚ© Ø±ÙˆÛŒ Ø¯Ø§ÛŒØ±Ù‡ØŒ Ù†Ø§Ø­ÛŒÙ‡ Ø®Ø§Ù„Øµ Ùˆ Ù†Ø§Ø­ÛŒÙ‡ Ø§Ø´ØªØ±Ø§Ú© Ø±Ø§ Ù¾ÙˆØ´Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.
          // Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ù†ÙˆØ¹ Û³ØŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ÛŒØ¯ Ø¨Ù‡ ØµÙˆØ±Øª Ø¨ØµØ±ÛŒ Ù†Ø§Ø­ÛŒÙ‡ Ø¯Ø±Ø³Øª Ø±Ø§ Ù‡Ø¯Ù Ø¨Ú¯ÛŒØ±Ø¯.
          // Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒØŒ Ø§Ú¯Ø± Ú©Ø§Ø±Ø¨Ø± Ø±ÙˆÛŒ A Ú©Ù„ÛŒÚ© Ú©Ù†Ø¯ØŒ Ù…Ø§ Ø¨Ø§ÛŒØ¯ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒÙ… Ú©Ù‡ Ø¢ÛŒØ§ Ù†Ø§Ø­ÛŒÙ‡ A Ø®Ø§Ù„Øµ ÛŒØ§ AUB ÛŒØ§ Aâˆ©B ØµØ­ÛŒØ­ Ø§Ø³Øª.

          // Ø¨Ø±Ø§ÛŒ ØªÙÚ©ÛŒÚ© Ø¨Ù‡ØªØ± Ù†Ø§Ø­ÛŒÙ‡ Ø§Ø´ØªØ±Ø§Ú© Ø§Ø² Ù†Ø§Ø­ÛŒÙ‡ Ø§Ù†ÙØ±Ø§Ø¯ÛŒØŒ Ù†ÛŒØ§Ø² Ø¨Ù‡ ÛŒÚ© Ø¹Ù†ØµØ± DOM Ù…Ø¬Ø²Ø§ Ø¯Ø± Ù†Ø§Ø­ÛŒÙ‡ Ù‡Ù…Ù¾ÙˆØ´Ø§Ù†ÛŒ Ø¨ÙˆØ¯.
          // Ø§ÛŒÙ†Ø¬Ø§ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø±Ø§ Ø¨Ø§ Ù…Ø®ØªØµØ§Øª Ø§Ù†Ø¬Ø§Ù… Ù†Ù…ÛŒâ€ŒØ¯Ù‡ÛŒÙ… Ùˆ Ø¨Ù‡ ØµÙˆØ±Øª Ø²ÛŒØ± Ø¹Ù…Ù„ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…:
          const rectA = setA.getBoundingClientRect();
          const rectB = setB.getBoundingClientRect();
          const pointX = e.clientX || e.touches[0].clientX;
          const pointY = e.clientY || e.touches[0].clientY;

          // **Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù†Ø§Ø­ÛŒÙ‡ Ø§Ø´ØªØ±Ø§Ú©**
          const isInsideA =
            pointX >= rectA.left &&
            pointX <= rectA.right &&
            pointY >= rectA.top &&
            pointY <= rectA.bottom;
          const isInsideB =
            pointX >= rectB.left &&
            pointX <= rectB.right &&
            pointY >= rectB.top &&
            pointY <= rectB.bottom;

          // Ø§Ú¯Ø± Ù‡Ù… Ø¯Ø± A Ùˆ Ù‡Ù… Ø¯Ø± B Ø¨Ø§Ø´Ø¯ØŒ Ø¨Ù‡ ØµÙˆØ±Øª Ù…Ù†Ø·Ù‚ÛŒ Ù†Ø§Ø­ÛŒÙ‡ Ø§Ø´ØªØ±Ø§Ú© Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ Ø§Ø³Øª.
          if (isInsideA && isInsideB) {
            selectedVennSet = "A-and-B";
          } else if (isInsideA) {
            selectedVennSet = "A-only";
          } else if (isInsideB) {
            selectedVennSet = "B-only";
          } else if (clickedSet.id === "universal") {
            selectedVennSet = "U-AUB"; // Ù…ØªÙ…Ù…
          }

          // **ØªÙˆØ¬Ù‡: Ø§ÛŒÙ† Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ø´Ú©Ù„ Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ Ùˆ ØªØ¯Ø§Ø®Ù„ Ø¯Ù‚ÛŒÙ‚ Ù†ÛŒØ³ØªØŒ Ø§Ù…Ø§ Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ù¾Ø§ÛŒÙ‡ Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³Øª.**
        }
      }

      // ==========================================================
      // Ù…Ù†Ø·Ù‚ Ø§ØµÙ„ÛŒ Ø¨Ø§Ø²ÛŒ
      // ==========================================================

      function loadQuestion() {
        if (currentQuestion >= totalQuestions) {
          endGame();
          return;
        }

        const q = questions[currentQuestion];
        qText.textContent = `Ø³ÙˆØ§Ù„ ${currentQuestion + 1}/${totalQuestions}: ${
          q.text
        }`;
        optionElementsArea.innerHTML = "";
        vennContainer.style.display = "none";

        resetSelections();

        // ØªÙ†Ø¸ÛŒÙ… Ø¯Ú©Ù…Ù‡ Ø§Ú©Ø´Ù†
        actionButton.textContent = "Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®";
        actionButton.style.backgroundColor = "var(--secondary-color)";
        actionButton.style.color = "#333";
        isAnswerChecked = false;

        // -----------------------
        // Ù†ÙˆØ¹ 1 Ùˆ 2: Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ Ø§Ù†ØªØ®Ø§Ø¨
        // -----------------------
        if (q.type === 1 || q.type === 2) {
          const items = q.type === 1 ? q.elements : q.options;
          items.forEach((itemValue) => {
            const item = document.createElement("div");
            item.className = "selectable-item";
            item.textContent = itemValue;
            item.dataset.value = itemValue;

            if (q.type === 1) {
              item.onclick = (e) => handleType1Click(e.target, itemValue);
            } else if (q.type === 2) {
              item.onclick = (e) => handleType2Click(e.target, itemValue);
            }
            optionElementsArea.appendChild(item);
          });

          // -----------------------
          // Ù†ÙˆØ¹ 3: Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ†
          // -----------------------
        } else if (q.type === 3) {
          vennContainer.style.display = "block";
          // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† DropZoneÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ú©Ù„ÛŒÚ©
          document.querySelectorAll(".venn-zone").forEach((el) => {
            el.onclick = handleVennClick;
          });
          // ÙÙ‚Ø· Ù†Ù…Ø§ÛŒØ´ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² (Ù…Ø«Ù„Ø§Ù‹ Ø§Ú¯Ø± ÙÙ‚Ø· A' Ø¨Ø§Ø´Ø¯ØŒ B Ø±Ø§ Ù†Ø§Ø¯ÛŒØ¯Ù‡ Ø¨Ú¯ÛŒØ±Ø¯)
          setB.style.display = q.setNames.includes("B") ? "block" : "none";
        }

        updateProgress();
      }

      // ==========================================================
      // Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ú©Ù…Ù‡ Ø§Ú©Ø´Ù†
      // ==========================================================

      function handleActionButton() {
        if (!isAnswerChecked) {
          checkAnswer();
        } else {
          nextQuestion();
        }
      }

      function checkAnswer() {
        if (isAnswerChecked) return;

        const q = questions[currentQuestion];
        let isCorrect = false;

        if (q.type === 1) {
          // Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø¢Ø±Ø§ÛŒÙ‡â€ŒÙ‡Ø§ (ØªØ±ØªÛŒØ¨ Ù…Ù‡Ù… Ù†ÛŒØ³Øª)
          isCorrect =
            selectedType1.sort().join(",") === q.correctAnswer.sort().join(",");
        } else if (q.type === 2) {
          isCorrect = selectedType2 === q.correctAnswer;
          if (!selectedType2) {
            showFeedback(false);
            return;
          } // Ø§Ú¯Ø± Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù†Ø´Ø¯Ù‡
        } else if (q.type === 3) {
          if (!selectedVennSet) {
            showFeedback(false);
            return;
          } // Ø§Ú¯Ø± Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ù†Ø´Ø¯Ù‡

          // Ù…Ù†Ø·Ù‚ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø± ÙˆÙ† Ø¨Ø± Ø§Ø³Ø§Ø³ Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡
          if (q.correctAnswer === "A-and-B" && selectedVennSet === "A-and-B")
            isCorrect = true;
          else if (q.correctAnswer === "A-only" && selectedVennSet === "A-only")
            isCorrect = true;
          else if (q.correctAnswer === "B-only" && selectedVennSet === "B-only")
            isCorrect = true;
          else if (
            q.correctAnswer === "AUB" &&
            (selectedVennSet === "A-only" ||
              selectedVennSet === "B-only" ||
              selectedVennSet === "A-and-B")
          )
            isCorrect = true;
          else if (q.correctAnswer === "U-AUB" && selectedVennSet === "U-AUB")
            isCorrect = true;
          else if (
            q.correctAnswer === "A-only-or-B-only" &&
            (selectedVennSet === "A-only" || selectedVennSet === "B-only")
          )
            isCorrect = true; // ØªÙØ§Ø¶Ù„ Ù…ØªÙ‚Ø§Ø±Ù†
          else isCorrect = false;
        }

        if (isCorrect) {
          score += scorePerQuestion;
          showFeedback(true);
          isAnswerChecked = true;

          // ØªØ¨Ø¯ÛŒÙ„ Ø¯Ú©Ù…Ù‡ Ø¨Ù‡ "Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ"
          actionButton.textContent = "Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ ğŸš€";
          actionButton.style.backgroundColor = "var(--primary-color)";
          actionButton.style.color = "white";
        } else {
          showFeedback(false);
          // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ¹ Û± Ùˆ Û³ (Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ¹ Û² Ø§Ø¬Ø§Ø²Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø¬Ø¯Ø¯ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
          if (q.type === 1 || q.type === 3) {
            resetSelections();
          }
        }

        updateProgress();
      }

      function nextQuestion() {
        currentQuestion++;
        loadQuestion();
      }

      function endGame() {
        const finalScoreValue = Math.round(score);

        let message;
        if (finalScoreValue > 80) {
          message = `Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ Ø´Ù…Ø§: ${finalScoreValue} Ø§Ø² 100! Ø´Ù…Ø§ ÛŒÚ© Ù†Ø§Ø¨ØºÙ‡ Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ Ù‡Ø³ØªÛŒØ¯! ğŸ†`;
        } else if (finalScoreValue > 50) {
          message = `Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ Ø´Ù…Ø§: ${finalScoreValue} Ø§Ø² 100. ØªÙ„Ø§Ø´ Ø´Ù…Ø§ Ø¹Ø§Ù„ÛŒ Ø¨ÙˆØ¯ØŒ Ø¨Ø§ Ú©Ù…ÛŒ ØªÙ…Ø±ÛŒÙ† Ø¨Ù‡ØªØ± Ù‡Ù… Ù…ÛŒâ€ŒØ´ÙˆÛŒØ¯! ğŸ‘`;
        } else {
          message = `Ø§Ù…ØªÛŒØ§Ø² Ù†Ù‡Ø§ÛŒÛŒ Ø´Ù…Ø§: ${finalScoreValue} Ø§Ø² 100. Ù†Ú¯Ø±Ø§Ù† Ù†Ø¨Ø§Ø´ÛŒØ¯ØŒ Ù…ÙÙ‡ÙˆÙ… Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ ØªÚ©Ø±Ø§Ø± Ø¬Ø§ Ù…ÛŒâ€ŒØ§ÙØªØ¯. ğŸ’ª`;
        }

        document.getElementById("final-message").textContent = message;

        document.getElementById("question-area").style.display = "none";
        document.getElementById("option-elements").style.display = "none";
        actionButton.style.display = "none";
        document.getElementById("feedback-message").style.display = "none";
        document.getElementById("final-score").style.display = "block";
      }

      // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ
      loadQuestion();
    </script>
  </body>
</html>
